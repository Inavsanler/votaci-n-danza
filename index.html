const API_BASE_URL = "http://localhost:4000"; // Cambiar por la URL de producción si es necesario

async function loadNominees() {
    const response = await fetch(`${API_BASE_URL}/nominees`);
    // El resto del código...
}

async function vote(id) {
    const response = await fetch(`${API_BASE_URL}/vote`, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ id })
    });
    // El resto del código...
}

async function addNominee(event) {
    event.preventDefault();
    const response = await fetch(`${API_BASE_URL}/nominees`, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
            name,
            country,
            bio: { es: bioEs, en: bioEn },
            photo,
            curriculum
        })
    });
}
// Import the functions you need from the SDKs you need
import { initializeApp } from "firebase/app";
// TODO: Add SDKs for Firebase products that you want to use
// https://firebase.google.com/docs/web/setup#available-libraries

// Your web app's Firebase configuration
const firebaseConfig = {
  apiKey: "AIzaSyD3TxXM7pXatK_A9IA9sLeySt1sP84_Haw",
  authDomain: "votosmensajediadanza.firebaseapp.com",
  projectId: "votosmensajediadanza",
  storageBucket: "votosmensajediadanza.firebasestorage.app",
  messagingSenderId: "482989069896",
  appId: "1:482989069896:web:2aec18e2a89c4b6b616a7d"
};

// Initialize Firebase
const app = initializeApp(firebaseConfig);
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lista de Nominados</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
</head>
<body class="bg-light">
    <div class="container py-5">
        <h1 class="text-center mb-4">Nominados al Mensaje del Día Internacional de la Danza</h1>
        
        <!-- Contenedor de Nominados -->
        <div id="nominee-list" class="row g-4">
            <!-- Los nominados se cargarán aquí dinámicamente -->
        </div>

        <!-- Formulario para añadir un nuevo candidato -->
        <div class="mt-5">
            <h3 class="text-primary">Agregar una Nueva Candidatura</h3>
            <form id="add-nominee-form" class="bg-white shadow p-4 rounded">
                <div class="mb-3">
                    <label for="name" class="form-label">Nombre del Candidato</label>
                    <input type="text" id="name" class="form-control" placeholder="Introduce el nombre" required>
                </div>
                <div class="mb-3">
                    <label for="country" class="form-label">País</label>
                    <input type="text" id="country" class="form-control" placeholder="Introduce el país" required>
                </div>
                <div class="mb-3">
                    <label for="bioEs" class="form-label">Biografía en Español</label>
                    <textarea id="bioEs" class="form-control" rows="3" placeholder="Introduce la biografía en español" required></textarea>
                </div>
                <div class="mb-3">
                    <label for="bioEn" class="form-label">Biografía en Inglés</label>
                    <textarea id="bioEn" class="form-control" rows="3" placeholder="Introduce la biografía en inglés" required></textarea>
                </div>
                <div class="mb-3">
                    <label for="photo" class="form-label">URL de la Foto</label>
                    <input type="url" id="photo" class="form-control" placeholder="Introduce la URL de la foto" required>
                </div>
                <div class="mb-3">
                    <label for="curriculum" class="form-label">Enlace al Currículum</label>
                    <input type="url" id="curriculum" class="form-control" placeholder="Introduce el enlace al currículum" required>
                </div>
                <button type="submit" class="btn btn-primary w-100">Agregar Candidato</button>
            </form>
        </div>
    </div>

    <script>
        // Lista inicial de candidatos
        const predefinedNominees = [
            { 
                id: 1, 
                name: "Misty Copeland", 
                country: "Estados Unidos", 
                bio: {
                    es: "Primera bailarina del American Ballet Theatre, defensora de la diversidad racial en el ballet clásico.",
                    en: "Principal dancer at the American Ballet Theatre, advocate for racial diversity in classical ballet."
                }, 
                photo: "https://hbr.org/resources/images/article_assets/2022/05/R2204P_MISTY_COPELAND_VERTICAL.jpg", 
                curriculum: "https://www.mistycopeland.com/about", 
                votes: 0 
            },
	    {         
		id: 2, 
        name: "Lía Rodrigues", 
	country: "Brasil",
        bio: {
            es: "Coreógrafa contemporánea que trabaja con comunidades desfavorecidas en Río de Janeiro, utilizando la danza como herramienta de cambio social.",
            en: "Contemporary choreographer working with underprivileged communities in Rio de Janeiro, using dance as a tool for social change."
        }, 
        photo: "https://princeclausfund.nl/uploads/Content%20Awardees%201997%20-%202020/2014,%20Lia%20Rodrigues/Profile/Lia%20Rodrigues_profile.jpeg",
	curriculum: "https://www.liarodrigues.com/page1/index.php", 
        votes: 0 
    }, 
    { 
        id: 3, 
        name: "Osiel Gouneo",
	country: "Cuba - Alemania", 
        bio: {
            es: "Bailarín principal del Ballet Estatal de Baviera, ex-primer bailarín del Ballet Nacional de Cuba, reconocido por su virtuosismo técnico, carisma escénico y su habilidad para interpretar repertorios clásicos y contemporáneos.",
            en: "Principal dancer at the Bavarian State Ballet, former principal dancer of the Cuban National Ballet, renowned for his technical virtuosity, stage charisma, and ability to perform both classical and contemporary repertoire."
        }, 
        photo: "https://www.staatsoper.de/media/_processed_/d/d/csm_Osiel_Gouneo_BSB_P_C__NICHOLAS_MACKAY-03818_RGB_6ac1ea996e.jpg",
	curriculum: "https://www.staatsoper.de/biographien/gouneo-osiel", 
        votes: 0 
    }, 
    { 
        id: 4, 
        name: "Juliano Nunes",
	country: "Brasil", 
        bio: {
            es: "Coreógrafo contemporáneo reconocido por su capacidad para combinar fluidez, técnica y emoción en sus piezas, colaborando con compañías de renombre mundial.",
            en: "Contemporary choreographer recognized for his ability to combine fluidity, technique, and emotion in his works, collaborating with renowned companies worldwide."
        }, 
        photo: "https://kajabi-storefronts-production.kajabi-cdn.com/kajabi-storefronts-production/themes/2147484261/settings_images/3q1PWUTIRyiQTnJrwIl2_Juliano_Nunes_Dance_Masterclass.jpeg", 
	curriculum: "https://www.nunesart.com/pages/read-more-about", 
        votes: 0 
    }, 
    { 
        id: 5, 
        name: "Rodney Bell -Ngāti Maniapoto- ", 
	country: "Nueva Zelanda",
        bio: {
            es: "Bailarín contemporáneo que explora la inclusión en la danza a través del movimiento en silla de ruedas.",
            en: "Contemporary dancer exploring inclusion in dance through wheelchair movement."
        }, 
        photo: "https://cdn.nzedge.com/wp-content/uploads/2022/08/rodney_bell11aug22.jpg", 
	curriculum: "https://en.wikipedia.org/wiki/Rodney_Bell", 
        votes: 0 
    },
    { 
        id: 6, 
        name: "José Carlos Martínez",
	country: " España - Francia ", 
        bio: {
            es: "Bailarín y coreógrafo, actual director artístico del Ballet de la Ópera de París, exdirector de la Compañía Nacional de Danza de España, reconocido por su trabajo tanto en el ballet clásico como en la danza contemporánea.",
            en: "Dancer and choreographer, current artistic director of the Paris Opera Ballet, former director of the National Dance Company of Spain, recognized for his work in both classical ballet and contemporary dance."
        }, 
        photo: "https://recursos.march.es/culturales/documentos/autoridades/42440.jpg", 
	curriculum: "https://www.operadeparis.fr/en/artists/jose-martinez",  
        votes: 0 
    },
    { 
        id: 7, 
        name: "Cristina Hoyos",
	country: "España", 
        bio: {
            es: "Figura icónica del flamenco, reconocida por su labor como bailarina, coreógrafa y embajadora del flamenco en el mundo.",
            en: "Iconic figure of flamenco, recognized for her work as a dancer, choreographer, and ambassador of flamenco worldwide."
        }, 
        photo: "https://academiadelasartesescenicas.es/imagenes/contenido/socios/cristina-hoyos-bw-red-web.jpg", 
	curriculum: "https://academiadelasartesescenicas.es/cristina-hoyos/",   
        votes: 0 
    }, 
    { 
        id: 8, 
        name: "Steven McRae",
	country: "Reino Unido", 
        bio: {
            es: "Primer bailarín del Royal Ballet, conocido por su versatilidad técnica, su virtuosismo y su capacidad para abordar tanto repertorios clásicos como obras contemporáneas.",
            en: "Principal dancer of the Royal Ballet, known for his technical versatility, virtuosity, and ability to tackle both classical and contemporary repertoires."
        }, 
        photo: "https://pbs.twimg.com/media/Gaz19VaaEAAFl9_?format=jpg&name=large", 
	curriculum: "https://www.rbo.org.uk/people/steven-mcrae",    
        votes: 0 
    },
    { 
        id: 9, 
        name: "Mijaíl Barýshnikov",
	country: "Estados Unidos", 
        bio: {
            es: "Leyenda viva del ballet y la danza contemporánea, conocido por su impacto global en el arte de la danza, tanto como intérprete como defensor de nuevas formas de expresión.",
            en: "Living legend of ballet and contemporary dance, known for his global impact on the art of dance, both as a performer and advocate for new forms of expression."
        }, 
        photo: "https://upload.wikimedia.org/wikipedia/commons/thumb/e/e8/Mikhail_Baryshnikov_2000.jpg/220px-Mikhail_Baryshnikov_2000.jpg", 
	curriculum: "https://www.baryshnikovproductions.com/mikhail-baryshnikov",     
        votes: 0 
    },
    { 
        id: 10, 
        name: "Alexander Ekman",
	country: "Suecia", 
        bio: {
            es: "Coreógrafo contemporáneo innovador, conocido por su enfoque teatral y por desafiar los límites del ballet y la danza contemporánea.",
            en: "Innovative contemporary choreographer, known for his theatrical approach and for pushing the boundaries of ballet and contemporary dance."
        }, 
        photo: "https://www.ndt.nl/content/uploads/2020/01/EKMAN.ALEXANDER-by-Rahi-Rezvani-810x1440.jpg?t=f6ed541f61d4d1391100a3b3d3e35722", 
	curriculum: "https://www.operadeparis.fr/en/artists/alexander-ekman",
        votes: 0 
    },
    { 
        id: 11, 
        name: "Iván Pérez Avilés",
	country: "España - Países Bajos", 
        bio: {
            es: "Coreógrafo y director del Dance Theatre Heidelberg, destacado por su exploración de la emocionalidad humana y su enfoque interdisciplinar en el movimiento.",
            en: "Choreographer and director of Dance Theatre Heidelberg, known for his exploration of human emotions and interdisciplinary approach to movement."
        }, 
        photo: "https://res.cloudinary.com/opera-national-de-paris/image/upload/c_crop%2Ch_3817%2Cw_2546%2Cx_0%2Cy_0/h_550/f_auto/v1/user_photos/cbedjcctha9ftvxhxawq?_a=E",
	curriculum: "https://www.theaterheidelberg.de/en/menschen/567-ivn-prez", 
        votes: 0 
    },
    { 
        id: 12, 
        name: "Faustin Linyekula",
	country: "Rep. del Congo", 
        bio: { 
            es: "Coreógrafo que utiliza la danza para abordar temas de memoria histórica y reconstrucción cultural.",
            en: "Choreographer who uses dance to address themes of historical memory and cultural reconstruction."
        }, 
        photo: "https://festival-avignon.com/storage/artist/76//2676_linyekula_faustin_348x348__c__agathe_poupeney.jpg",
	curriculum: "https://princeclausfund.nl/awardees/faustin-linyekula", 
        votes: 0 
    },
    { 
        id: 13, 
        name: "Mamela Nyamza",
	country: " Sudafrica ", 
        bio: { 
            es: "Bailarina contemporánea y activista, conocida por tratar temas de política, género e identidad.",
            en: "Contemporary dancer and activist, known for addressing issues of politics, gender, and identity."
        }, 
        photo: "https://keuse.files.wordpress.com/2011/08/mamela-nyamza.jpg?w=200",
	curriculum: "https://en.wikipedia.org/wiki/Mamela_Nyamza",  
        votes: 0 
    },
    { 
        id: 14, 
        name: "Eva Yerbabuena",
	country:"España", 
        bio: { 
            es: "Una de las figuras más destacadas del flamenco contemporáneo, reconocida por su fuerza expresiva e innovación.",
            en: "One of the most prominent figures in contemporary flamenco, recognized for her expressive strength and innovation."
        }, 
        photo: "https://upload.wikimedia.org/wikipedia/commons/thumb/c/cb/Encuentro_con_Eva_Yerbabuena_エバ・ジェルバブエナを迎えて_%2836504042744%29_%28cropped%29.jpg/220px-Encuentro_con_Eva_Yerbabuena_エバ・ジェルバブエナを迎えて_%2836504042744%29_%28cropped%29.jpg",
	curriculum: "https://www.evayerbabuena.com/sobre-eva-yerbabuena",   
        votes: 0 
    },
    { 
        id: 15, 
        name: "Shantala Shivalingappa",
	country: "La India", 
        bio: { 
            es: "Especialista en Kuchipudi, danza clásica india, reconocida por su fusión de tradiciones con exploraciones contemporáneas.",
            en: "Kuchipudi specialist, an Indian classical dance, known for her fusion of traditional forms with contemporary explorations."
        }, 
        photo: "https://s.hdnux.com/photos/21/07/34/4486954/4/1920x0.jpg",
	curriculum: "https://shantalashivalingappa.com/shantala-shivalingappa/",    
        votes: 0 
    },
    { 
            id: 16, 
            name: "Eko Supriyanto",
	country: "Indonesia",
            bio: {
                es: "Coreógrafo que utiliza las danzas tradicionales de Indonesia como base para un lenguaje contemporáneo.",
                en: "Choreographer who uses traditional Indonesian dances as a foundation for a contemporary language."
            }, 
            photo: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcS5tD-uZAn_sFqGCSqzpIwXqk8bfjLCufzWdQ&s",
	curriculum: "https://www.ekosdance.com/#eko-supriyanto", 
            votes: 0 
        },
        { 
            id: 17, 
            name: "Aakash Odedra", 
	country: "Reino Unido - India", 
            bio: {
                es: "Bailarín y coreógrafo que combina técnicas de danza clásica india (kathak) con una sensibilidad moderna.",
                en: "Dancer and choreographer combining classical Indian dance techniques (Kathak) with a modern sensibility."
            }, 
            photo: "https://www.asian-voice.com/var/ezdemo_site/storage/images/_aliases/article_main/asian-voice/volumes/2021/31-july-2021/one-to-one-aakash-odedra/1696078-3-eng-GB/One-to-One-Aakash-Odedra.jpg",
	curriculum: "https://aakashodedra.com/about-us/", 
 
            votes: 0 
        },
        { 
            id: 18, 
            name: "Wang Yabin",
	country: "China", 
            bio: {
                es: "Bailarina y coreógrafa que fusiona danza contemporánea y danza tradicional china, destacada internacionalmente.",
                en: "Dancer and choreographer who merges contemporary dance with traditional Chinese dance, recognized internationally."
            }, 
            photo: "https://thewonderfulworldofdance.com/wp-content/uploads/2016/04/Yabin-Wang-credit-Koen-Broos.jpg",
	curriculum: "https://www.east-man.be/en/people/1008/Yabin-Wang",  
            votes: 0 
        },
        { 
            id: 19, 
            name: "Tao Ye",
	country: " China", 
            bio: {
                es: "Fundador de Tao Dance Theatre, conocido por su enfoque minimalista y abstracto en la danza contemporánea.",
                en: "Founder of Tao Dance Theatre, known for his minimalist and abstract approach to contemporary dance."
            }, 
            photo: "https://www.ndt.nl/content/uploads/2023/05/Tao-Ye_2-810x1440.jpg?t=2051bac813580570ade18881b056e4c1", 
	curriculum: "http://www.taodancetheater.com/Archives/IndexArctype/index/t_id/10.html",  
            votes: 0 
        },
        { 
            id: 20, 
            name: "Kaiji Moriyama",
	country: " Japón", 
            bio: {
                es: "Bailarín contemporáneo y coreógrafo que utiliza técnicas innovadoras y colabora interdisciplinariamente con música y teatro.",
                en: "Contemporary dancer and choreographer who uses innovative techniques and collaborates interdisciplinarily with music and theater.",
            }, 
            photo: "https://encrypted-tbn3.gstatic.com/images?q=tbn:ANd9GcT1rk8C2BtnQ7JdYoTLB2YHJJ3ZlnVnO9wn6PBvEHYz1sA2cwki1MKJGDPw_ZznEMGcL_mw9SBFqvISf5jdidZwJg", 
	curriculum: "https://www.kaijimoriyama.com/profile-en",  
            votes: 0 
        },
        { 
            id: 21, 
            name: "Padmini Chettur",
	country: " India ", 
            bio: {
                es: "Exponente del Bharatanatyam contemporáneo, conocida por deconstruir las tradiciones clásicas para adaptarlas a un lenguaje moderno.",
                en: "Exponent of contemporary Bharatanatyam, known for deconstructing classical traditions to adapt them to a modern language."
            }, 
            photo: "https://encrypted-tbn1.gstatic.com/images?q=tbn:ANd9GcTJFcNHn_KJDJkJpmbIRq9GkMWXEXUpfIqGOeOd-euTiOBEAP-sD5EQlvHTr5UuNceVd1gbdd8Lf43WeqlMiSFJgg", 
	curriculum: "http://www.padminichettur.in/profile/",   
            votes: 0 
        },
        { 
    id: 22, 
    name: "Frances Rings",
	country: " Australia", 
    bio: { 
        es: "Coreógrafa aborigen de Bangarra Dance Theatre, que representa historias indígenas australianas a través de la danza.",
        en: "Aboriginal choreographer of Bangarra Dance Theatre, representing Indigenous Australian stories through dance."
    }, 
    photo: "https://yaffa-cdn.s3.amazonaws.com/yaffadsp/images/dmImage/StandardImage/frances-rings---bangarra_credit_daniel-boud_0402.jpg", 
	curriculum: "https://www.bangarra.com.au/about/people/frances-rings/",    
    votes: 0 
        },
        { 
    id: 19,  
    name: "Dada Masilo",
	country: " Sudáfrica ", 
    bio: { 
        es: "Bailarina y coreógrafa sudafricana reconocida por sus reinterpretaciones innovadoras de ballets clásicos como 'El lago de los cisnes' y 'Giselle', integrando movimientos africanos y cuestionando las normas tradicionales del género.",
        en: "South African dancer and choreographer renowned for her innovative reinterpretations of classical ballets like 'Swan Lake' and 'Giselle,' incorporating African movements and challenging traditional gender norms."
    }, 
    photo: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQDG_3gPB2EQoZETxPOCLrml1gxwpIdevH2Ot6KLKsGAODfOxCBNXh33-pXVmAMEBKU8u4&usqp=CAU",  
	curriculum: "https://www.theatredurondpoint.fr/artiste/dada-masilo/",    
    votes: 0         
	},
        { 
            id: 23, 
            name: "Burak Serkan Cebeci",
	country: "Turquía", 
            bio: {
                es: "Bailarín de ballet turco, formado en la Universidad Dokuz Eylül, solista en el Ballet de Leipzig y la Ópera Estatal de Mersin.",
                en: "A Turkish ballet dancer trained at Dokuz Eylül University, soloist with the Leipzig Ballet and the Mersin State Opera."
            },
            photo: "https://www.ndm.cz/userfiles/archiv_priloh/clanky/fotografie/zivotopisy/balet/cebeci-1503994992.jpg", 
	curriculum: "https://www.operabale.gov.tr/tr-tr/Sayfalar/artistdetail.aspx?ArtistId=4023",    
            votes: 0
        },
        ];
        // Función para cargar los nominados desde el servidor
        async function loadNominees() {
            try {
                const response = await fetch("http://localhost:4000/nominees"); // Reemplaza con la URL de tu servidor
                const nominees = await response.json();

                const nomineeList = document.getElementById('nominee-list');
                nomineeList.innerHTML = ''; // Limpiar el contenedor

                nominees.forEach(nominee => {
                    const nomineeCard = document.createElement('div');
                    nomineeCard.className = "col-md-4";
                    nomineeCard.innerHTML = `
                        <div class="card shadow-sm">
                            <img src="${nominee.photo}" class="card-img-top" alt="Foto de ${nominee.name}">
                            <div class="card-body">
                                <h5 class="card-title">${nominee.name}</h5>
                                <p><strong>País:</strong> ${nominee.country}</p>
                                <p><strong>Biografía (ES):</strong> ${nominee.bio.es}</p>
                                <p><strong>Biografía (EN):</strong> ${nominee.bio.en}</p>
                                <div class="d-flex justify-content-between">
                                    <button class="btn btn-link" onclick="window.open('${nominee.curriculum}', '_blank')">Currículum</button>
                                    <button class="btn btn-success" onclick="vote(${nominee.id})">Votar (${nominee.votes})</button>
                                </div>
                            </div>
                        </div>
                    `;
                    nomineeList.appendChild(nomineeCard);
                });
            } catch (error) {
                console.error("Error al cargar los nominados:", error);
            }
        }

        // Función para votar por un candidato
        async function vote(id) {
            try {
                const response = await fetch("http://localhost:4000/vote", { // Reemplaza con la URL de tu servidor
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json"
                    },
                    body: JSON.stringify({ id })
                });

                if (response.ok) {
                    loadNominees(); // Recargar los nominados después de votar
                } else {
                    console.error("Error al registrar el voto:", await response.text());
                }
            } catch (error) {
                console.error("Error al votar:", error);
            }
        }

        // Función para añadir un nuevo candidato
        async function addNominee(event) {
            event.preventDefault(); // Evitar el comportamiento por defecto del formulario

            const name = document.getElementById('name').value;
            const country = document.getElementById('country').value;
            const bioEs = document.getElementById('bioEs').value;
            const bioEn = document.getElementById('bioEn').value;
            const photo = document.getElementById('photo').value;
            const curriculum = document.getElementById('curriculum').value;

            try {
                const response = await fetch("http://localhost:4000/nominees", { // Reemplaza con la URL de tu servidor
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json"
                    },
                    body: JSON.stringify({
                        name,
                        country,
                        bio: { es: bioEs, en: bioEn },
                        photo,
                        curriculum
                    })
                });

                if (response.ok) {
                    loadNominees(); // Recargar la lista de nominados después de añadir uno nuevo
                    document.getElementById('add-nominee-form').reset(); // Resetear el formulario
                } else {
                    console.error("Error al añadir un nuevo candidato:", await response.text());
                }
            } catch (error) {
                console.error("Error al añadir un candidato:", error);
            }
        }

        // Event Listener para el formulario
        document.getElementById('add-nominee-form').addEventListener('submit', addNominee);

        // Cargar los nominados al cargar la página
        window.onload = loadNominees;
